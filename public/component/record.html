<div x-data="recordData">
    <table class="data-table">
        <thead>
            <tr>
                <th>模型名称</th>
                <th>Provider</th>
                <th>API Key</th>
                <th>prompt tokens</th>
                <th>completion tokens</th>
                <th>是否流式</th>
                <th>首次响应</th>
                <th>总响应时间</th>
                <th>TPS</th>
                <th>请求时间</th>
            </tr>
        </thead>
        <tbody>
            <template x-for="record in result.list" :key="record.id">
                <tr>
                    <td x-text="record.model_name"></td>
                    <td x-text="getProviderName(record.provider_id)"></td>
                    <td x-text="getApiKeyName(record.api_key_id)"></td>
                    <td x-text="record.prompt_tokens || '/'"></td>
                    <td x-text="record.completion_tokens || '/'"></td>
                    <td x-text="record.is_stream"></td>
                    <td x-text="record.first_token_time || '/'"></td>
                    <td x-text="record.response_time"></td>
                    <td x-text="record.completion_tokens ? (record.completion_tokens / (record.response_time - record.first_token_time || 0) * 1000).toFixed(2) : '/'"></td>
                    <td x-text="record.request_at"></td>
                </tr>
            </template>
        </tbody>
    </table>
    <div class="pagination">
        <button @click="previousPage" :disabled="current_page === 1" class="pagination-button">Previous</button>

        <template x-for="page in getVisiblePages()" :key="page">
            <button
                @click="goToPage(page)"
                x-text="page"
                :class="{ 'active': current_page === page, 'pagination-button': true }"
            ></button>
        </template>

        <span>Page <span x-text="current_page"></span> of <span x-text="Math.ceil(result.total / page_size)"></span></span>
        <button @click="nextPage" :disabled="current_page >= Math.ceil(result.total / page_size)" class="pagination-button">Next</button>
    </div>
</div>
